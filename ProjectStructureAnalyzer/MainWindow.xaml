<Window x:Class="ProjectStructureAnalyzer.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:ProjectStructureAnalyzer"
        Title="Project Structure Analyzer" Height="600" Width="800">
    <Window.Resources>
        <!-- Определение конвертера для видимости -->
        <local:BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        <!-- Новый конвертер для выбора изображения -->
        <local:BooleanToImageConverter x:Key="BooleanToImageConverter" />
        <!-- Стили для визуализации -->
        <Style x:Key="TreeViewItemStyle" TargetType="TreeViewItem">
            <Setter Property="IsExpanded" Value="{Binding IsUserFolder, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=True}" />
            <Setter Property="ToolTip" Value="{Binding FullPath}" />
            <EventSetter Event="Selected" Handler="TreeViewItem_Selected"/>
        </Style>
    </Window.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <!-- Добавлена строка для статуса сохранения -->
        </Grid.RowDefinitions>
        <StackPanel Orientation="Horizontal" Margin="5">
            <TextBox x:Name="PathTextBox" Width="400" Margin="5" Text="{Binding SelectedPath, RelativeSource={RelativeSource AncestorType=Window}, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
            <Button x:Name="SelectFolderButton" Content="Выбрать папку" Click="SelectFolderButton_Click" Margin="5" Padding="5"/>
            <Button x:Name="AnalyzeButton" Content="Анализировать" Click="AnalyzeButton_Click" Margin="5" Padding="5"
                    IsEnabled="{Binding SelectedPath, Converter={StaticResource BooleanToVisibilityConverter}, ConverterParameter=GreaterThanZero}" />
            <Button x:Name="SettingsButton" Content="Настройки" Click="SettingsButton_Click" Margin="5" Padding="5"/>
        </StackPanel>
        <TreeView x:Name="ProjectTreeView" Grid.Row="1" Margin="5" ItemContainerStyle="{StaticResource TreeViewItemStyle}" SelectedItemChanged="TreeViewItem_Selected">
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate ItemsSource="{Binding Children}">
                    <StackPanel Orientation="Horizontal">
                        <Image Width="16" Height="16" Margin="0,0,5,0">
                            <Image.Source>
                                <Binding Path="IsDirectory" Converter="{StaticResource BooleanToImageConverter}" />
                            </Image.Source>
                        </Image>
                        <TextBlock Text="{Binding Name}" />
                    </StackPanel>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
        </TreeView>
        <StackPanel Grid.Row="2" Orientation="Horizontal" Margin="5">
            <TextBlock Text="Файлов: " Margin="5"/>
            <TextBlock x:Name="FileCountText" Margin="5"/>
            <TextBlock Text="Папок: " Margin="5"/>
            <TextBlock x:Name="FolderCountText" Margin="5"/>
            <Button x:Name="ExportButton" Content="Экспортировать" Click="ExportButton_Click" Margin="5" Padding="5" IsEnabled="False"/>
            <TextBlock x:Name="StatusText" Margin="5"/>
        </StackPanel>
        <TextBlock x:Name="ExportStatusText" Grid.Row="3" Margin="5" Foreground="Green" Visibility="Collapsed"/>
        <!-- Новый элемент для статуса -->
    </Grid>
</Window>